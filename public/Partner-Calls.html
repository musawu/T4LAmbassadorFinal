<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>T4L Ambassador Dashboard</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <style>
      /* Prevent horizontal overflow globally */
      * {
        box-sizing: border-box;
      }
      
      html, body {
        overflow-x: hidden;
        max-width: 100vw;
      }
      
      .sidebar-toggle {
        display: none;
      }
      @media (max-width: 768px) {
        .sidebar-toggle {
          display: block;
          position: fixed;
          top: 1rem;
          left: 1rem;
          z-index: 50;
          background: #4b0d7f;
          color: white;
          border-radius: 50%;
          width: 40px;
          height: 40px;
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .sidebar {
          transform: translateX(-100%);
          transition: transform 0.3s ease;
          position: fixed;
          height: 100vh;
          z-index: 40;
        }

        .sidebar.active {
          transform: translateX(0);
        }

        .overlay {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: rgba(0, 0, 0, 0.5);
          z-index: 30;
        }

        .overlay.active {
          display: block;
        }
      }

      /* Modal styles */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.75);
        backdrop-filter: blur(4px);
        z-index: 100;
        overflow-y: auto;
        padding: 1rem;
      }

      .modal.active {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .modal-content {
        background: white;
        border-radius: 1.5rem;
        max-width: 900px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
        animation: modalSlideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      }

      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-30px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
          transform: translateY(0);
        }
        to {
          opacity: 0;
          transform: translateY(-10px);
        }
      }

      .modal-content::-webkit-scrollbar {
        width: 10px;
      }

      .modal-content::-webkit-scrollbar-track {
        background: #f8f9fa;
        border-radius: 10px;
      }

      .modal-content::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, #4b0d7f, #6b1fa1);
        border-radius: 10px;
        border: 2px solid #f8f9fa;
      }

      .modal-content::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(180deg, #3a0a65, #5a1881);
      }

      .form-section {
        border-bottom: 1px solid #e5e7eb;
        padding-bottom: 1.5rem;
      }

      .form-section:last-of-type {
        border-bottom: none;
      }

      .input-icon {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: #6b7280;
        font-size: 1.25rem;
      }

      .input-with-icon {
        padding-left: 3.5rem;
      }

      .required-indicator {
        color: #dc2626;
        margin-left: 0.25rem;
      }

      .form-label {
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        font-size: 0.875rem;
        letter-spacing: 0.025em;
      }

      .section-divider {
        display: flex;
        align-items: center;
        margin: 2rem 0;
      }

      .section-divider::before,
      .section-divider::after {
        content: '';
        flex: 1;
        height: 1px;
        background: linear-gradient(to right, transparent, #e5e7eb, transparent);
      }

      .section-number {
        background: linear-gradient(135deg, #4b0d7f, #6b1fa1);
        color: white;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 0.875rem;
        margin: 0 1rem;
      }

      .input-icon {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: #6b7280;
        z-index: 10;
      }

      /* Line clamp utility */
      .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      
      /* FIX: Prevent opportunity cards from overflowing */
      #opportunitiesContainer {
        width: 100%;
        max-width: 100%;
        overflow-x: hidden;
      }
      
      #opportunitiesContainer article {
        width: 100%;
        max-width: 100%;
        overflow-wrap: break-word;
        word-wrap: break-word;
        word-break: break-word;
      }
      
      /* Ensure all text content wraps properly */
      #opportunitiesContainer h3,
      #opportunitiesContainer h4,
      #opportunitiesContainer p,
      #opportunitiesContainer span {
        overflow-wrap: break-word;
        word-wrap: break-word;
        word-break: break-word;
        max-width: 100%;
      }
      
      /* Fix for buttons and action containers */
      #opportunitiesContainer .flex {
        flex-wrap: wrap;
        max-width: 100%;
      }
      
      /* Responsive adjustments */
      @media (max-width: 768px) {
        #opportunitiesContainer article {
          padding: 1rem;
        }
        
        #opportunitiesContainer .flex.items-center.gap-6 {
          gap: 1rem;
        }
        
        #opportunitiesContainer button {
          font-size: 0.875rem;
          padding: 0.5rem 1rem;
        }
      }
    </style>
    
  </head>

  <body class="bg-gray-50 font-sans">
    <!-- Mobile Sidebar Toggle -->
    <button class="sidebar-toggle" id="sidebarToggle">
      <i class="bx bx-menu text-xl"></i>
    </button>

    <!-- Overlay for mobile sidebar -->
    <div class="overlay" id="overlay"></div>

    <div class="flex min-h-screen">
      <!-- Sidebar -->
      <aside
        class="sidebar w-20 lg:w-20 md:w-20 bg-white shadow-md flex flex-col items-center py-6 space-y-6 z-40"
      >
        <div class="mb-4">
          <div
            class="bg-[#4b0d7f] text-white px-3 py-2 rounded-xl font-semibold text-sm"
          >
            T4L
          </div>
        </div>

        <nav class="flex flex-col space-y-4 text-gray-700 w-full">
          <a id="homeLink" href="/ambassador-dashboard.html" class="flex flex-col items-center cursor-pointer group transition-all duration-200 py-2 px-3 rounded-lg hover:bg-purple-50">
            <i class="bx bxs-home text-2xl text-[#4b0d9f] group-hover:scale-110 transition-transform duration-200"></i>
            <span class="text-[10px] mt-1.5 font-medium text-gray-600 group-hover:text-[#4b0d9f] transition-colors duration-200">Home</span>
          </a>

          <a href="/article-amb.html" class="flex flex-col items-center cursor-pointer group transition-all duration-200 py-2 px-3 rounded-lg hover:bg-purple-50">
            <i class="bx bx-edit-alt text-2xl group-hover:text-[#4b0d9f] group-hover:scale-110 transition-all duration-200"></i>
            <span class="text-[10px] mt-1.5 font-medium text-gray-600 group-hover:text-[#4b0d9f] transition-colors duration-200">Publishing</span>
          </a>

          <a href="/journey.html" class="flex flex-col items-center cursor-pointer group transition-all duration-200 py-2 px-3 rounded-lg hover:bg-purple-50">
            <i class="bx bx-line-chart text-2xl group-hover:text-[#4b0d9f] group-hover:scale-110 transition-all duration-200"></i>
            <span class="text-[10px] mt-1.5 font-medium text-gray-600 group-hover:text-[#4b0d9f] transition-colors duration-200">Impact Log</span>
          </a>

          <a href="/Partner-Calls.html" class="flex flex-col items-center cursor-pointer group transition-all duration-200 py-2 px-3 rounded-lg hover:bg-purple-50 bg-purple-50">
            <i class="bx bx-briefcase text-2xl text-[#4b0d9f] group-hover:scale-110 transition-all duration-200"></i>
            <span class="text-[10px] mt-1.5 font-medium text-[#4b0d9f] transition-colors duration-200">Partners</span>
          </a>

          <a href="https://www.t4leader.com/event" class="flex flex-col items-center cursor-pointer group transition-all duration-200 py-2 px-3 rounded-lg hover:bg-purple-50">
            <i class="bx bx-calendar-event text-2xl group-hover:text-[#4b0d9f] group-hover:scale-110 transition-all duration-200"></i>
            <span class="text-[10px] mt-1.5 font-medium text-gray-600 group-hover:text-[#4b0d9f] transition-colors duration-200">Events</span>
          </a>

          <a href="/chat-pillar.html" class="flex flex-col items-center cursor-pointer group transition-all duration-200 py-2 px-3 rounded-lg hover:bg-purple-50">
            <i class="bx bx-chat text-2xl group-hover:text-[#4b0d9f] group-hover:scale-110 transition-all duration-200"></i>
            <span class="text-[10px] mt-1.5 font-medium text-gray-600 group-hover:text-[#4b0d9f] transition-colors duration-200">Chat</span>
          </a>

          <a href="/profile.html" class="flex flex-col items-center cursor-pointer group transition-all duration-200 py-2 px-3 rounded-lg hover:bg-purple-50">
            <i class="bx bx-user text-2xl group-hover:text-[#4b0d9f] group-hover:scale-110 transition-all duration-200"></i>
            <span class="text-[10px] mt-1.5 font-medium text-gray-600 group-hover:text-[#4b0d9f] transition-colors duration-200">Profile</span>
          </a>

          <a href="/profile.html" class="flex flex-col items-center cursor-pointer group transition-all duration-200 py-2 px-3 rounded-lg hover:bg-purple-50">
            <i class="bx bx-cog text-2xl group-hover:text-[#4b0d9f] group-hover:scale-110 transition-all duration-200"></i>
            <span class="text-[10px] mt-1.5 font-medium text-gray-600 group-hover:text-[#4b0d9f] transition-colors duration-200">Settings</span>
          </a>

          <div id="logoutBtn" class="flex flex-col items-center cursor-pointer group transition-all duration-200 py-2 px-3 rounded-lg hover:bg-red-50">
            <i class="bx bx-log-out text-2xl group-hover:text-red-600 group-hover:scale-110 transition-all duration-200"></i>
            <span class="text-[10px] mt-1.5 font-medium text-gray-600 group-hover:text-red-600 transition-colors duration-200">Logout</span>
          </div>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="flex-1 p-4 md:p-6 lg:p-6 min-w-0">
        <!-- Top Navbar -->
        <header
          class="flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4"
        >
          <h1 class="text-xl font-semibold text-gray-900">T4L Ambassador</h1>
          <div class="flex items-center space-x-4 w-full md:w-auto">
            <div class="relative flex-1 md:flex-none">
              <input
                type="text"
                placeholder="Search articles, events, partners..."
                class="border border-gray-400 rounded-full pl-10 pr-4 py-2 text-sm w-full md:w-80 focus:outline-none focus:ring-2 focus:ring-purple-500"
              />
              <i class="bx bx-search absolute left-3 top-2.5 text-gray-900"></i>
            </div>
            <div class="flex items-center space-x-2">
              <i class="bx bx-bell text-2xl text-gray-900"></i>
              <div
                class="w-10 h-10 bg-[#4b0d7f] flex items-center justify-center rounded-full font-bold text-white"
              >
                SM
              </div>
            </div>
          </div>
        </header>

        <!-- Hero Section -->
        <section
          class="bg-gradient-to-r from-[#4b0d7f] to-[#a36737] text-white p-4 md:p-6 rounded-2xl mb-6 shadow-md"
        >
          <h2 class="text-xl md:text-2xl font-semibold mb-2">
            Welcome back, Sarah!
          </h2>
          <p class="text-sm mb-6">
            You're in Month 3
            <span class="font-semibold">Visibility Stage</span><br />
            There's an opportunity for you to be featured on our next podcast!
          </p>
        </section>

        <!-- LIFT Pillar Section -->
        <section class="bg-white p-6 md:p-8 rounded-2xl mb-6 shadow-md">
          <h2 class="text-xl font-bold mb-5">LIFT Pillar</h2>

          <div class="relative mb-6">
            <select
              class="w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-700 text-base appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white"
            >
              <option>Leading Self</option>
              <option>Inspiring Others</option>
              <option>Fostering Teams</option>
              <option>Transforming Orgs</option>
            </select>
            <svg
              class="absolute right-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-700 pointer-events-none"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </div>

          <h3 class="text-lg font-bold mb-4">Visibility Opportunities</h3>

          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <button
              onclick="setActive(this)"
              class="opportunity-btn active bg-[#4b0d7f] text-white px-5 py-4 rounded-xl shadow-md hover:shadow-lg transition-all font-semibold text-base"
            >
              Speaking
            </button>

            <button
              onclick="setActive(this)"
              class="opportunity-btn bg-gray-300 text-black px-5 py-4 rounded-xl shadow-md hover:shadow-lg transition-all font-semibold text-base"
            >
              Podcast
            </button>

            <button
              onclick="setActive(this)"
              class="opportunity-btn bg-gray-300 text-black px-5 py-4 rounded-xl shadow-md hover:shadow-lg transition-all font-semibold text-base"
            >
              Webinar
            </button>

            <button
              onclick="setActive(this)"
              class="opportunity-btn bg-gray-300 text-black px-5 py-4 rounded-xl shadow-md hover:shadow-lg transition-all font-semibold text-base"
            >
              Volunteering
            </button>
          </div>
        </section>

        <!-- Opportunity Cards Section - DYNAMIC CONTENT -->
        <section class="space-y-6 mb-6 w-full max-w-full" id="opportunitiesContainer">
          <!-- Dynamic posts will be loaded here -->
        </section>
      </main>
    </div>

    <!-- Application Modal -->
    <div class="modal" id="applicationModal">
      <div class="modal-content">
        <!-- Enhanced Header -->
        <div class="bg-gradient-to-br from-[#4b0d7f] via-[#6b1fa1] to-[#8b2fb1] text-white p-8 rounded-t-2xl relative overflow-hidden">
          <div class="absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full -mr-32 -mt-32"></div>
          <div class="absolute bottom-0 left-0 w-48 h-48 bg-white/5 rounded-full -ml-24 -mb-24"></div>
          
          <button onclick="closeModal()" class="absolute top-6 right-6 text-white/80 hover:text-white hover:bg-white/10 w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300">
            <i class="bx bx-x text-3xl"></i>
          </button>
          
          <div class="relative flex items-start gap-5">
            <div class="w-20 h-20 rounded-2xl bg-white/15 backdrop-blur-sm flex items-center justify-center flex-shrink-0 shadow-xl">
              <i class="bx bx-microphone text-white text-4xl"></i>
            </div>
            <div class="flex-1 min-w-0">
              <h2 class="text-3xl font-bold mb-2 leading-tight">Application Form</h2>
              <p class="text-white/90 text-base mb-1 font-medium">TechLeaders Podcast</p>
              <p class="text-white/70 text-sm">December 2025 Guest Speaker Series</p>
            </div>
          </div>
        </div>

        <form class="p-8 md:p-10 space-y-8 bg-gradient-to-b from-gray-50 to-white">
          
          <!-- Section 1: Personal Information -->
          <div class="form-section">
            <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-2">
              <i class="bx bx-user text-[#4b0d7f] text-2xl"></i>
              Personal Information
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
              <div>
                <label class="form-label">
                  First Name<span class="required-indicator">*</span>
                </label>
                <div class="relative">
                  <i class="bx bx-user input-icon"></i>
                  <input type="text" required class="input-with-icon w-full pl-12 pr-4 py-3.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white shadow-sm" placeholder="Enter first name">
                </div>
              </div>
              <div>
                <label class="form-label">
                  Last Name<span class="required-indicator">*</span>
                </label>
                <div class="relative">
                <i class="bx bx-user input-icon"></i>
                <input type="text" required class="input-with-icon w-full pl-12 pr-4 py-3.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white shadow-sm" placeholder="Enter last name">
                </div>
              </div>
            </div>

            <div class="mt-5">
              <label class="form-label">
                Email Address<span class="required-indicator">*</span>
              </label>
              <div class="relative">
                <i class="bx bx-envelope input-icon"></i>
                <input type="email" required class="input-with-icon w-full pl-12 pr-4 py-3.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white shadow-sm" placeholder="your.email@example.com">
              </div>
            </div>

            <div class="mt-5">
              <label class="form-label">
                LinkedIn Profile URL<span class="required-indicator">*</span>
              </label>
              <div class="relative">
                <i class="bx bxl-linkedin-square input-icon"></i>
                <input type="url" required class="input-with-icon w-full pl-12 pr-4 py-3.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white shadow-sm" placeholder="https://linkedin.com/in/yourprofile">
              </div>
            </div>
          </div>

          <!-- Section 2: Professional Background -->
          <div class="form-section">
            <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-2">
              <i class="bx bx-briefcase text-[#4b0d7f] text-2xl"></i>
              Professional Background
            </h3>
            
            <div class="space-y-5">
              <div>
                <label class="form-label">
                  Current Job Title<span class="required-indicator">*</span>
                </label>
                <div class="relative">
                  <i class="bx bx-id-card input-icon"></i>
                  <input type="text" required class="input-with-icon w-full pl-12 pr-4 py-3.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white shadow-sm" placeholder="e.g., CTO, VP of Engineering, Tech Lead">
                </div>
              </div>

              <div>
                <label class="form-label">
                  Company Name<span class="required-indicator">*</span>
                </label>
                <div class="relative">
                  <i class="bx bx-buildings input-icon"></i>
                  <input type="text" required class="input-with-icon w-full pl-12 pr-4 py-3.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white shadow-sm" placeholder="Your current organization">
                </div>
              </div>

              <div>
                <label class="form-label">
                  Years of Professional Experience<span class="required-indicator">*</span>
                </label>
                <div class="relative">
                  <i class="bx bx-time-five input-icon"></i>
                  <select required class="input-with-icon w-full pl-12 pr-4 py-3.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white shadow-sm">
                    <option value="">Select your experience level</option>
                    <option>0-2 years</option>
                    <option>3-5 years</option>
                    <option>6-10 years</option>
                    <option>11-15 years</option>
                    <option>16-20 years</option>
                    <option>20+ years</option>
                  </select>
                  <i class="bx bx-chevron-down absolute right-4 top-1/2 -translate-y-1/2 text-gray-600 pointer-events-none text-xl"></i>
                </div>
              </div>
            </div>
          </div>

          <!-- Section 3: Application Details -->
          <div class="form-section">
            <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-2">
              <i class="bx bx-file-blank text-[#4b0d7f] text-2xl"></i>
              Application Details
            </h3>
            
            <div class="space-y-5">
              <div>
                <label class="form-label">
                  Why are you interested in this opportunity?<span class="required-indicator">*</span>
                </label>
                <textarea required rows="4" class="w-full px-4 py-3.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white shadow-sm resize-none" placeholder="Share your motivation and what excites you about this opportunity..."></textarea>
                <p class="text-xs text-gray-500 mt-2">Minimum 50 characters</p>
              </div>

              <div>
                <label class="form-label">
                  Relevant Experience & Achievements<span class="required-indicator">*</span>
                </label>
                <textarea required rows="4" class="w-full px-4 py-3.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white shadow-sm resize-none" placeholder="Describe your relevant experience with AI transformation, leadership initiatives, or technical innovations..."></textarea>
                <p class="text-xs text-gray-500 mt-2">Include specific examples and outcomes</p>
              </div>

              <div>
                <label class="form-label">
                  Speaking Topics & Expertise<span class="required-indicator">*</span>
                </label>
                <textarea required rows="3" class="w-full px-4 py-3.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white shadow-sm resize-none" placeholder="List 3-5 topics you're comfortable discussing (e.g., AI Strategy, Team Leadership, Digital Transformation...)"></textarea>
              </div>
            </div>
          </div>

          <!-- Section 4: Additional Information -->
          <div class="form-section">
            <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-2">
              <i class="bx bx-info-circle text-[#4b0d7f] text-2xl"></i>
              Additional Information
            </h3>
            
            <div class="space-y-5">
              <div>
                <label class="form-label mb-3">
                  Prior Podcast/Speaking Experience
                </label>
                <div class="flex gap-6 flex-wrap">
                  <label class="flex items-center gap-2 cursor-pointer group">
                    <input type="radio" name="podcast-experience" value="yes" class="w-4 h-4 text-purple-600 border-gray-300 focus:ring-purple-500">
                    <span class="text-gray-700 group-hover:text-purple-700 transition-colors">Yes, I have experience</span>
                  </label>
                  <label class="flex items-center gap-2 cursor-pointer group">
                    <input type="radio" name="podcast-experience" value="no" class="w-4 h-4 text-purple-600 border-gray-300 focus:ring-purple-500">
                    <span class="text-gray-700 group-hover:text-purple-700 transition-colors">No, this would be my first</span>
                  </label>
                </div>
              </div>

              <div>
                <label class="form-label">
                  Portfolio or Personal Website <span class="text-gray-400 text-xs">(Optional)</span>
                </label>
                <div class="relative">
                  <i class="bx bx-globe input-icon"></i>
                  <input type="url" class="input-with-icon w-full pl-12 pr-4 py-3.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white shadow-sm" placeholder="https://yourwebsite.com">
                </div>
              </div>

              <div>
                <label class="form-label">
                  Additional Comments or Questions <span class="text-gray-400 text-xs">(Optional)</span>
                </label>
                <textarea rows="3" class="w-full px-4 py-3.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white shadow-sm resize-none" placeholder="Any other information you'd like to share with us..."></textarea>
              </div>
            </div>
          </div>

          <!-- Terms and Submit Section -->
          <div class="pt-4 space-y-6">
            <div class="bg-purple-50 border border-purple-100 rounded-xl p-5 space-y-3">
              <label class="flex items-start gap-3 cursor-pointer group">
                <input type="checkbox" required class="mt-0.5 w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500 flex-shrink-0">
                <span class="text-sm text-gray-700">
                  I agree to the <a href="#" class="text-purple-700 hover:text-purple-900 font-semibold underline">terms and conditions</a> and understand that my application will be reviewed by the T4L team within 5-7 business days.<span class="required-indicator">*</span>
                </span>
              </label>
              <label class="flex items-start gap-3 cursor-pointer group">
                <input type="checkbox" class="mt-0.5 w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500 flex-shrink-0">
                <span class="text-sm text-gray-700">
                  I would like to receive updates about similar opportunities and T4L program news.
                </span>
              </label>
            </div>

            <!-- Submit Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 pt-2">
              <button type="button" onclick="closeModal()" class="flex-1 px-6 py-4 border-2 border-gray-300 text-gray-700 rounded-xl font-bold hover:bg-gray-50 hover:border-gray-400 transition-all duration-300 flex items-center justify-center gap-2">
                <i class="bx bx-x text-xl"></i>
                Cancel
              </button>
              <button type="submit" class="flex-1 px-6 py-4 bg-gradient-to-r from-[#4b0d7f] to-[#6b1fa1] text-white rounded-xl font-bold hover:from-[#3a0a65] hover:to-[#5a1881] shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-2">
                <i class="bx bx-send text-xl"></i>
                Submit Application
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Scripts -->
    <script>
      // Visibility opportunities active state functionality
      function setActive(button) {
        document.querySelectorAll(".opportunity-btn").forEach((btn) => {
          btn.classList.remove("active", "bg-[#4b0d7f]", "text-white");
          btn.classList.add("bg-gray-300", "text-black");
        });

        button.classList.add("active", "bg-[#4b0d7f]", "text-white");
        button.classList.remove("bg-gray-300", "text-black");
      }

      // Sidebar toggle for mobile
      const sidebarToggle = document.getElementById("sidebarToggle");
      const sidebar = document.querySelector(".sidebar");
      const overlay = document.getElementById("overlay");

      sidebarToggle.addEventListener("click", () => {
        sidebar.classList.toggle("active");
        overlay.classList.toggle("active");
      });

      overlay.addEventListener("click", () => {
        sidebar.classList.remove("active");
        overlay.classList.remove("active");
      });

      // Modal functionality
      const modal = document.getElementById("applicationModal");

      function openModal(postId = null) {
        modal.classList.add("active");
        document.body.style.overflow = "hidden";
        
        // Store the post ID for form submission
        if (postId) {
          modal.dataset.postId = postId;
          
          // Pre-fill form with ambassador profile data
          fetch('/api/profile')
            .then(response => response.json())
            .then(profile => {
              // Auto-fill name fields
              const nameInputs = document.querySelectorAll('input[placeholder*="name"]');
              if (nameInputs.length > 0 && profile.name) {
                const nameParts = profile.name.split(' ');
                if (nameParts.length > 0) {
                  nameInputs[0].value = nameParts[0]; // First name
                }
                if (nameParts.length > 1 && nameInputs[1]) {
                  nameInputs[1].value = nameParts.slice(1).join(' '); // Last name
                }
              }
              
              // Auto-fill email
              const emailInput = document.querySelector('input[type="email"]');
              if (emailInput && profile.email) {
                emailInput.value = profile.email;
              }
            })
            .catch(error => {
              console.error('Error fetching profile:', error);
            });
        }
      }

      function closeModal() {
        modal.classList.remove("active");
        document.body.style.overflow = "auto";
        delete modal.dataset.postId;
      }

      // Close modal when clicking outside
      modal.addEventListener("click", (e) => {
        if (e.target === modal) {
          closeModal();
        }
      });

      // Close modal with Escape key
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && modal.classList.contains("active")) {
          closeModal();
        }
      });

      // Handle form submission
      document.querySelector("form").addEventListener("submit", async (e) => {
        e.preventDefault();
        
        const postId = modal.dataset.postId;
        if (!postId) {
          alert('No opportunity selected');
          return;
        }
        
        // Get form data
        const coverLetterTextarea = document.querySelector('textarea[placeholder*="motivation"]') || 
                                   document.querySelector('textarea[placeholder*="Share your motivation"]');
        const additionalInfoTextarea = document.querySelector('textarea[placeholder*="Any other information"]');
        
        const formData = {
          postId: postId,
          coverLetter: coverLetterTextarea ? coverLetterTextarea.value : '',
          additionalInfo: additionalInfoTextarea ? additionalInfoTextarea.value : ''
        };
        
        try {
          const response = await fetch('/api/applications', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
          });
          
          if (response.ok) {
            // Show success notification
            showApplicationSuccess();
            closeModal();
            e.target.reset();
          } else {
            const error = await response.json();
            throw new Error(error.error || 'Application failed');
          }
        } catch (error) {
          console.error('Application error:', error);
          alert('Failed to submit application: ' + error.message);
        }
      });
      
      function showApplicationSuccess() {
        const notification = document.createElement('div');
        notification.className = 'fixed top-4 right-4 bg-white rounded-xl shadow-2xl p-6 max-w-md z-[200] animate-slideIn';
        notification.style.animation = 'modalSlideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1)';
        notification.innerHTML = `
          <div class="flex items-start gap-4">
            <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
              <i class="bx bx-check text-green-600 text-2xl"></i>
            </div>
            <div class="flex-1">
              <h4 class="font-bold text-gray-900 text-lg mb-1">Application Submitted!</h4>
              <p class="text-gray-600 text-sm leading-relaxed">
                Your profile and CV have been automatically sent to the partner. 
                They will review your application and contact you soon.
              </p>
            </div>
            <button onclick="this.parentElement.parentElement.remove()" class="text-gray-400 hover:text-gray-600 transition-colors">
              <i class="bx bx-x text-2xl"></i>
            </button>
          </div>
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.style.animation = 'fadeOut 0.3s ease-out';
          setTimeout(() => notification.remove(), 300);
        }, 5000);
      }

      // Load dynamic posts when page loads
      document.addEventListener('DOMContentLoaded', function() {
        loadOpportunities();
      });

      // Helper function to format time ago
      function timeAgo(timestamp) {
        const now = Date.now();
        const diff = now - timestamp;
        
        const minutes = Math.floor(diff / 60000);
        const hours = Math.floor(diff / 3600000);
        const days = Math.floor(diff / 86400000);
        
        if (minutes < 1) return 'Just now';
        if (minutes < 60) return `${minutes} minute${minutes > 1 ? 's' : ''} ago`;
        if (hours < 24) return `${hours} hour${hours > 1 ? 's' : ''} ago`;
        return `${days} day${days > 1 ? 's' : ''} ago`;
      }

      // Get post type icon
      function getPostTypeIcon(postType) {
        const icons = {
          'speaking': 'bx-microphone',
          'podcast': 'bx-podcast',
          'webinar': 'bx-video',
          'volunteering': 'bx-heart'
        };
        return icons[postType.toLowerCase()] || 'bx-briefcase';
      }

      // Get post type color
      function getPostTypeColor(postType) {
        const colors = {
          'speaking': { bg: 'bg-purple-200', text: 'text-purple-800' },
          'podcast': { bg: 'bg-amber-200', text: 'text-amber-800' },
          'webinar': { bg: 'bg-sky-200', text: 'text-sky-800' },
          'volunteering': { bg: 'bg-pink-200', text: 'text-pink-800' }
        };
        return colors[postType.toLowerCase()] || colors['speaking'];
      }

      // Load and display opportunities
      function loadOpportunities() {
        fetch('/api/posts?limit=20')
          .then(response => response.json())
          .then(data => {
            const container = document.getElementById('opportunitiesContainer');
            
            if (!container) {
              console.error('Opportunities container not found');
              return;
            }

            // Clear existing content
            container.innerHTML = '';

            if (data.items && data.items.length > 0) {
              data.items.forEach(post => {
                const opportunityCard = createOpportunityCard(post);
                container.appendChild(opportunityCard);
              });
            } else {
              // Show empty state
              container.innerHTML = `
                <div class="bg-white rounded-2xl p-12 flex flex-col items-center justify-center text-center">
                  <i class="bx bx-briefcase text-6xl text-gray-400 mb-4"></i>
                  <h3 class="text-xl font-bold text-gray-900 mb-2">No opportunities available</h3>
                  <p class="text-gray-600 mb-4">Check back later for new speaking, podcast, and webinar opportunities.</p>
                </div>
              `;
            }
          })
          .catch(error => {
            console.error('Error loading opportunities:', error);
            const container = document.getElementById('opportunitiesContainer');
            container.innerHTML = `
              <div class="bg-white rounded-2xl p-12 flex flex-col items-center justify-center text-center">
                <i class="bx bx-error text-6xl text-red-400 mb-4"></i>
                <h3 class="text-xl font-bold text-gray-900 mb-2">Error loading opportunities</h3>
                <p class="text-gray-600 mb-4">Please try refreshing the page.</p>
                <button onclick="loadOpportunities()" class="bg-[#4b0d7f] text-white px-6 py-3 rounded-xl font-semibold hover:bg-purple-800 transition-all">
                  Try Again
                </button>
              </div>
            `;
          });
      }

      // Create opportunity card HTML - FIXED OVERFLOW VERSION
      function createOpportunityCard(post) {
        const card = document.createElement('article');
        card.className = 'bg-white rounded-2xl p-6 md:p-8 shadow-md hover:shadow-lg transition-all w-full max-w-full overflow-hidden';
        
        const color = getPostTypeColor(post.postType);
        const icon = getPostTypeIcon(post.postType);
        const timeAgoText = timeAgo(post.createdAt);
        
        card.innerHTML = `
          <div class="flex items-start justify-between mb-4 flex-wrap gap-4 w-full">
            <div class="flex items-center gap-4 min-w-0 flex-1">
              <div class="w-16 h-16 rounded-full bg-gradient-to-br from-purple-400 to-[#4b0d7f] flex items-center justify-center flex-shrink-0">
                <i class="bx ${icon} text-white text-2xl"></i>
              </div>
              <div class="min-w-0 flex-1">
                <h3 class="text-lg font-bold text-gray-900 truncate">${post.partnerName || 'Partner'}</h3>
                <p class="text-sm text-gray-500">${timeAgoText}</p>
              </div>
            </div>
            <div class="flex gap-2 flex-wrap flex-shrink-0">
              <span class="${color.bg} ${color.text} px-4 py-1.5 rounded-full text-sm font-semibold capitalize whitespace-nowrap">${post.postType}</span>
              ${post.liftPillars && post.liftPillars.length > 0 ? `
                <span class="bg-gray-200 text-gray-700 px-4 py-1.5 rounded-full text-sm font-semibold whitespace-nowrap">${post.liftPillars[0]}</span>
              ` : ''}
            </div>
          </div>

          <h4 class="text-xl md:text-2xl font-bold text-gray-900 mb-3 break-words">${post.title}</h4>
          <p class="text-gray-700 text-base mb-6 leading-relaxed line-clamp-3 break-words">
            ${post.description}
          </p>

          <div class="bg-[#4b0d7f] text-white px-6 py-4 rounded-xl mb-6 flex items-center justify-between flex-wrap gap-4">
            <span class="font-bold text-base md:text-lg whitespace-nowrap">Deadline: ${post.deadline}</span>
            <span class="font-semibold whitespace-nowrap">${post.spotsAvailable || 5} spots available</span>
          </div>

          <div class="flex items-center justify-between flex-wrap gap-4">
            <div class="flex items-center gap-4 md:gap-6 flex-wrap">
              <button class="flex items-center gap-2 text-gray-600 hover:text-purple-700 transition-all">
                <i class="bx bx-heart text-2xl"></i>
                <span class="font-medium">${post.likes || 0}</span>
              </button>
              <button class="flex items-center gap-2 text-gray-600 hover:text-purple-700 transition-all">
                <i class="bx bx-comment text-2xl"></i>
                <span class="font-medium">${post.comments || 0}</span>
              </button>
              <div class="flex items-center gap-2 text-gray-600">
                <i class="bx bx-show text-2xl"></i>
                <span class="font-medium">${post.views || 0}</span>
              </div>
            </div>
            <div class="flex items-center gap-3 flex-wrap">
              <button class="text-gray-600 hover:text-purple-700 p-2 hover:bg-gray-100 rounded-lg transition-all">
                <i class="bx bx-bookmark text-2xl"></i>
              </button>
              <button class="text-gray-600 hover:text-purple-700 p-2 hover:bg-gray-100 rounded-lg transition-all">
                <i class="bx bx-share-alt text-2xl"></i>
              </button>
              <button onclick="openModal('${post.id}')" class="bg-[#4b0d7f] text-white px-6 md:px-8 py-3 rounded-xl font-bold hover:bg-purple-800 shadow-lg transition-all whitespace-nowrap">
                Apply Now
              </button>
            </div>
          </div>
        `;
        
        return card;
      }

      // Setup logout and navigation based on role
      document.addEventListener('DOMContentLoaded', function() {
        // Fetch user role to determine home link
        fetch('/api/me')
          .then(response => {
            if (!response.ok) throw new Error('Not authenticated');
            return response.json();
          })
          .then(data => {
            // Update home link based on role
            const homeLink = document.getElementById('homeLink');
            if (homeLink && data.role) {
              if (data.role === 'partner') {
                homeLink.href = '/partner-dashboard.html';
              } else if (data.role === 'ambassador') {
                homeLink.href = '/ambassador-dashboard.html';
              } else if (data.role === 'admin') {
                homeLink.href = '/admin-dashboard.html';
              }
            }
          })
          .catch(error => {
            console.error('Error fetching user data:', error);
          });

        // Logout functionality
        const logoutBtn = document.getElementById('logoutBtn');
        if (logoutBtn) {
          logoutBtn.addEventListener('click', function() {
            fetch('/logout', { method: 'POST' })
              .then(() => {
                window.location.href = '/signin';
              })
              .catch(error => {
                console.error('Logout error:', error);
                window.location.href = '/signin';
              });
          });
        }
      });

      // Make functions available globally
      window.setActive = setActive;
      window.openModal = openModal;
      window.closeModal = closeModal;
      window.loadOpportunities = loadOpportunities;
    </script>
  </body>
</html>